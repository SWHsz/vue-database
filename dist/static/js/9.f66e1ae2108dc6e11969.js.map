{"version":3,"sources":["webpack:///src/views/admin/database/upload.vue","webpack:///./src/views/admin/database/upload.vue?628d","webpack:///./src/views/admin/database/upload.vue"],"names":["upload","data","table_type_list","value","label","methods","beforeUpload","file","isCSV","type","isXLS","isXLSX","this","$message","error","uploadFile","param","formData","FormData","append","table_type","__this","external__axios__default","url","method","headers","Authorization","Object","auth","Content-Type","then","res","message","$router","go","catch","err","database_upload","render","_vm","_h","$createElement","_c","_self","_v","attrs","placeholder","on","change","$event","$forceUpdate","model","callback","$$v","expression","_l","item","key","action","limit","show-file-list","http-request","before-upload","accept","size","staticClass","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"4IAmCAA,GACAC,KADA,WAEA,OACAC,kBAEAC,MAAA,SACAC,MAAA,WAGAD,MAAA,QACAC,MAAA,YAGAD,MAAA,QACAC,MAAA,YAGAD,MAAA,YACAC,MAAA,YAKAC,SACAC,aADA,SACAC,GACA,IAAAC,EAAA,aAAAD,EAAAE,KACAC,EAAA,6BAAAH,EAAAE,KACAE,EAAA,sEAAAJ,EAAAE,KAKA,OAHAD,GAAAE,GAAAC,GACAC,KAAAC,SAAAC,MAAA,0BAEAN,GAAAE,GAAAC,GAEAI,WAXA,SAWAC,GACA,IAAAC,EAAA,IAAAC,SAEAD,EAAAE,OAAA,OAAAH,EAAAT,MACA,IAAAa,EAAAR,KAAAQ,WACAC,EAAAT,KACYU,KACZC,IAAA,wBAAAH,EACAI,OAAA,OACAvB,KAAAgB,EACAQ,SACAC,cAAA,UAAAC,OAAAC,EAAA,EAAAD,GACAE,eAAA,yBAGAC,KACA,SAAAC,GACAV,EAAAR,UACAmB,QAAA,OACAvB,KAAA,YAEAY,EAAAY,QAAAC,GAAA,KAEAC,MACA,SAAAC,GACAf,EAAAR,UACAmB,QAAA,OACAvB,KAAA,UAEAY,EAAAY,QAAAC,GAAA,QC/FeG,GADEC,OAFjB,WAA0B,IAAAC,EAAA3B,KAAa4B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,MAAAH,EAAAK,GAAA,sBAAAF,EAAA,aAAuEG,OAAOC,YAAA,OAAoBC,IAAKC,OAAA,SAAAC,GAA0B,OAAAV,EAAAW,iBAA2BC,OAAQhD,MAAAoC,EAAA,WAAAa,SAAA,SAAAC,GAAgDd,EAAAnB,WAAAiC,GAAmBC,WAAA,eAA0Bf,EAAAgB,GAAAhB,EAAA,yBAAAiB,GAA6C,OAAAd,EAAA,aAAuBe,IAAAD,EAAArD,MAAA0C,OAAsBzC,MAAAoD,EAAApD,MAAAD,MAAAqD,EAAArD,WAAyC,GAAAoC,EAAAK,GAAA,KAAAF,EAAA,MAAAH,EAAAK,GAAA,KAAAF,EAAA,MAAAH,EAAAK,GAAA,KAAAF,EAAA,aAA2EG,OAAOa,OAAA,GAAAC,MAAA,IAAAC,kBAAA,EAAAC,eAAAtB,EAAAxB,WAAA+C,gBAAAvB,EAAAjC,aAAAyD,OAAA,qBAAyIrB,EAAA,aAAkBG,OAAOmB,KAAA,QAAAvD,KAAA,aAAiC8B,EAAAK,GAAA,UAAAL,EAAAK,GAAA,KAAAF,EAAA,OAAyCuB,YAAA,iBAAApB,OAAoCqB,KAAA,OAAaA,KAAA,QAAY3B,EAAAK,GAAA,iCAEv0BuB,oBCYjBC,EAdyBC,EAAQ,OAcjCC,CACEtE,EACAqC,GATF,EAEA,KAEA,KAEA,MAUekC,EAAA,QAAAH,EAAiB","file":"static/js/9.f66e1ae2108dc6e11969.js","sourcesContent":["<template>\r\n    \r\n    <div><br/>\r\n        导入表类型：\r\n        <el-select v-model=\"table_type\" placeholder=\"请选择\" @change=\"$forceUpdate()\">\r\n            <el-option\r\n                v-for=\"item in table_type_list\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n            ></el-option>\r\n        \r\n        </el-select>\r\n        <!-- 选择框与按钮之间空出一段距离 -->\r\n        <br/>\r\n        <br/>\r\n\r\n    <!-- 上传地址为/upload/{表名}，只能上传一个csv或者xls或者xlsx文件，使用bearer认证-->\r\n        <el-upload \r\n            action=\"\"\r\n            limit=\"1\"\r\n            :show-file-list=\"true\"\r\n            :http-request=\"uploadFile\"\r\n            :before-upload=\"beforeUpload\"\r\n            accept=\".csv,.xls,.xlsx\"\r\n            >\r\n        <el-button size=\"small\" type=\"primary\">上传文件</el-button>\r\n        <div slot=\"tip\" class=\"el-upload__tip\">只能上传xls/xlsx/csv文件</div>\r\n        </el-upload>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport { getToken } from '@/utils/auth'\r\nexport default{\r\n    data(){\r\n        return {\r\n        table_type_list:[\r\n            {\r\n                value: 'tbcell',\r\n                label: '网络配置信息'\r\n            },\r\n            {\r\n                value: 'tbkpi',\r\n                label: 'KPI指标信息'\r\n            },\r\n            {\r\n                value: 'tbprb',\r\n                label: 'PRB干扰信息'\r\n            },\r\n            {\r\n                value: 'tbmrodata',\r\n                label: 'MRO数据'\r\n            }\r\n        ]\r\n        }\r\n    },\r\n    methods:{\r\n        beforeUpload(file) {\r\n            const isCSV = file.type === 'text/csv'\r\n            const isXLS = file.type === 'application/vnd.ms-excel'\r\n            const isXLSX = file.type === 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\r\n            \r\n            if (!isCSV && !isXLS && !isXLSX) {\r\n                this.$message.error('上传文件只能是csv/xls/xlsx格式!')\r\n            }\r\n            return (isCSV || isXLS || isXLSX)\r\n        },\r\n        uploadFile(param) {\r\n            let formData = new FormData();\r\n\r\n            formData.append('file', param.file);\r\n            let table_type = this.table_type;\r\n            let __this = this;\r\n            axios({\r\n                url: '/api/database/upload/' + table_type,\r\n                method: 'post',\r\n                data: formData,\r\n                headers:{\r\n                    \"Authorization\": \"Bearer \" + getToken(),\r\n                    \"Content-Type\": \"multipart/form-data\"\r\n                \r\n                }\r\n            }).then(\r\n                    (res) => {\r\n                        __this.$message({\r\n                            message: '上传成功',\r\n                            type: 'success'\r\n                        });\r\n                        __this.$router.go(0);\r\n                    }\r\n                ).catch(\r\n                    (err) => {\r\n                        __this.$message({\r\n                            message: '上传失败',\r\n                            type: 'error'\r\n                        });\r\n                        __this.$router.go(0);\r\n                    }\r\n                )                    \r\n        }\r\n    }\r\n    \r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/views/admin/database/upload.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('br'),_vm._v(\"\\n    导入表类型：\\n    \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},on:{\"change\":function($event){return _vm.$forceUpdate()}},model:{value:(_vm.table_type),callback:function ($$v) {_vm.table_type=$$v},expression:\"table_type\"}},_vm._l((_vm.table_type_list),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-upload',{attrs:{\"action\":\"\",\"limit\":\"1\",\"show-file-list\":true,\"http-request\":_vm.uploadFile,\"before-upload\":_vm.beforeUpload,\"accept\":\".csv,.xls,.xlsx\"}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"上传文件\")]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传xls/xlsx/csv文件\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-bd68a530\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/admin/database/upload.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./upload.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./upload.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bd68a530\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./upload.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/admin/database/upload.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}